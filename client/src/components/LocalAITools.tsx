import { useState, useEffect, useRef } from "react";
import { Card } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs";
import { Progress } from "@/components/ui/progress";
import { useLanguage } from "@/hooks/useLanguage";

// ุชุนุฑูู ุฃููุงุน ุงูุฃุฏูุงุช
interface LocalAITool {
  id: string;
  name: string;
  nameEn: string;
  icon: string;
  category:
    | "face"
    | "body"
    | "background"
    | "artistic"
    | "enhancement"
    | "advanced";
  rating: "โญ" | "๐";
  description: string;
  model: string;
  features: string[];
  settings?: Record<string, any>;
  isLocal: boolean;
  size: string;
  processingTime: string;
}

// ุงูุฃุฏูุงุช ุงูู30 ุงููุงููุฉ
const LOCAL_AI_TOOLS: LocalAITool[] = [
  // ๐ฅ ุฃุฏูุงุช ุชุนุฏูู ุงููุฌู
  {
    id: "face_swap",
    name: "ุชุจุฏูู ุงููุฌู",
    nameEn: "Face Swap",
    icon: "fas fa-exchange-alt",
    category: "face",
    rating: "๐",
    description:
      "ุชุจุฏูู ุงููุฌูู ุจุฏูุฉ ุนุงููุฉ ููุงูุนูุฉ ูุฐููุฉ - ุชูููุฉ DeepFaceLab ุงููุชูุฏูุฉ",
    model: "DeepFaceLab SAEHD",
    features: [
      "ุชุจุฏูู ููุฑู ูููุฌูู",
      "ุญูุธ ููุงูุญ ุงููุฌู ุงูุทุจูุนูุฉ",
      "ุฏุนู ุงูููุฏูู ูุงูุตูุฑ",
      "ุชุนุฏูู ุงูุฅุถุงุกุฉ ุชููุงุฆูุงู",
    ],
    isLocal: true,
    size: "1.2GB",
    processingTime: "5-15 ุซุงููุฉ",
  },
  {
    id: "beauty_filter",
    name: "ููุชุฑ ุงูุฌูุงู ุงูุฐูู",
    nameEn: "AI Beauty Filter",
    icon: "fas fa-magic",
    category: "face",
    rating: "โญ",
    description: "ุชุญุณูู ุงูุฌูุงู ุงูุทุจูุนู ุจุฐูุงุก ุงุตุทูุงุนู ูุชูุฏู - ููุงุชุฑ ุงุญุชุฑุงููุฉ",
    model: "Phi-3 Vision",
    features: [
      "ุชูุนูู ุงูุจุดุฑุฉ ุงูุฐูู",
      "ุชูุจูุฑ ุงูุนููู ุทุจูุนูุงู",
      "ุชุญุฏูุฏ ุงููู ูุงูุฎุฏูุฏ",
      "ุฅุฒุงูุฉ ุงูุนููุจ ูุงูุจูุน",
    ],
    isLocal: true,
    size: "2.4GB",
    processingTime: "2-5 ุซูุงูู",
  },
  {
    id: "face_expression",
    name: "ุชุบููุฑ ุงูุชุนุจูุฑุงุช",
    nameEn: "Expression Changer",
    icon: "fas fa-smile",
    category: "face",
    rating: "โญ",
    description: "ุชุนุฏูู ุชุนุจูุฑุงุช ุงููุฌู (ุงุจุชุณุงูุฉุ ุญุฒูุ ููุงุฌุฃุฉ...) ุจูุงูุนูุฉ ูุฐููุฉ",
    model: "Phi-3 Vision",
    features: [
      "ุชุนุฏูู ุงูุงุจุชุณุงูุฉ ูุงูุถุญู",
      "ุชุบููุฑ ูุธุฑุฉ ุงูุนูููู",
      "ุชุนุฏูู ุญุฑูุฉ ุงูุญูุงุฌุจ",
      "ุชุญูู ูุงูู ูู ุงูุชุนุจูุฑุงุช",
    ],
    isLocal: true,
    size: "2.4GB",
    processingTime: "3-8 ุซูุงูู",
  },
  {
    id: "age_transform",
    name: "ุขูุฉ ุงูุฒูู",
    nameEn: "Age Transformation",
    icon: "fas fa-clock",
    category: "face",
    rating: "โญ",
    description: "ุชุตุบูุฑ ุฃู ุชูุจูุฑ ุงูุณู ุจูุงูุนูุฉ ูุฐููุฉ - ุณุงูุฑ ุนุจุฑ ุงูุฒูู!",
    model: "Stable Diffusion XL",
    features: [
      "ุชุตุบูุฑ ุงูุณู ุทุจูุนูุงู",
      "ุชูุจูุฑ ุงูุณู ุจูุงูุนูุฉ",
      "ุงูุญูุงุธ ุนูู ููุงูุญ ุงููููุฉ",
      "ุชุฏุฑุฌ ุนูุฑู ูุชูุฏู",
    ],
    isLocal: true,
    size: "6.9GB",
    processingTime: "8-15 ุซุงููุฉ",
  },
  {
    id: "gender_swap",
    name: "ุชุญููู ุงูุฌูุณ",
    nameEn: "Gender Swap",
    icon: "fas fa-venus-mars",
    category: "face",
    rating: "๐",
    description: "ุชุญููู ุงูุฌูุณ ุจูุงูุนูุฉ ูุงููุฉ ูุน ุงูุญูุงุธ ุนูู ุงููููุฉ ุงูุฃุณุงุณูุฉ",
    model: "Stable Diffusion XL",
    features: [
      "ุชุฃููุซ ุฃู ุชุฐููุฑ ุงูููุงูุญ",
      "ุงูุญูุงุธ ุนูู ุงููููุฉ",
      "ุชุนุฏูู ููุงูุญ ุงููุฌู",
      "ูุงูุนูุฉ ุนุงููุฉ ุงูุฏูุฉ",
    ],
    isLocal: true,
    size: "6.9GB",
    processingTime: "10-20 ุซุงููุฉ",
  },
  {
    id: "makeup_artist",
    name: "ููุงู ุงููููุงุฌ ุงูุฑููู",
    nameEn: "AI Makeup Artist",
    icon: "fas fa-palette",
    category: "face",
    rating: "โญ",
    description: "ุฅุถุงูุฉ ุฃู ุฅุฒุงูุฉ ุงููููุงุฌ ุจุฃุณุงููุจ ูุฎุชููุฉ - ูุฃูู ูู ุตุงููู ุชุฌููู!",
    model: "Phi-3 Vision",
    features: [
      "ูููุงุฌ ุทุจูุนู ูุฌูุงููุฑ",
      "ุฃุณุงููุจ ุนุฑุจูุฉ ูุขุณูููุฉ",
      "ุฅุฒุงูุฉ ุงููููุงุฌ ุงูููุฌูุฏ",
      "ุชุฌุฑุจุฉ ุฃููุงู ูุฎุชููุฉ",
    ],
    isLocal: true,
    size: "2.4GB",
    processingTime: "3-7 ุซูุงูู",
  },

  // ๐จ ุฃุฏูุงุช ุชุนุฏูู ุงูุฌุณู
  {
    id: "body_reshape",
    name: "ูุญุช ุงูุฌุณู ุงูุฑููู",
    nameEn: "Body Reshape",
    icon: "fas fa-dumbbell",
    category: "body",
    rating: "๐",
    description: "ุชูุญูู ุฃู ุชุถุฎ๏ฟฝ๏ฟฝู ุฃุฌุฒุงุก ุงูุฌุณู ุจุฏูุฉ ุงุญุชุฑุงููุฉ - ุฌุฑุงุญ ุชุฌููู ุฑููู!",
    model: "Segment Anything + SD",
    features: [
      "ุชูุญูู ุงูุฎุตุฑ ูุงูุจุทู",
      "ุชูุจูุฑ ุฃู ุชุตุบูุฑ ุงูุฃุฑุฏุงู",
      "ุชุนุฏูู ุญุฌู ุงูุตุฏุฑ",
      "ุชูููุฉ ุงูุนุถูุงุช",
    ],
    isLocal: true,
    size: "9.5GB",
    processingTime: "10-25 ุซุงููุฉ",
  },
  {
    id: "clothing_swap",
    name: "ุฎุฒุงูุฉ ุงูููุงุจุณ ุงูุณุญุฑูุฉ",
    nameEn: "Clothing Swap",
    icon: "fas fa-tshirt",
    category: "body",
    rating: "๐",
    description: "ุฅุถุงูุฉ ุฃู ุฅุฒุงูุฉ ุฃู ุชุบููุฑ ุงูููุงุจุณ ุจุฃู ุฃุณููุจ - ุญุฑูุฉ ูุงููุฉ!",
    model: "Stable Diffusion XL",
    features: [
      "ุฅุถุงูุฉ ููุงุจุณ ุฌุฏูุฏุฉ",
      "ุชุบููุฑ ุฃููุงุท ุงูุฃุฒูุงุก",
      "ุฅุฒุงูุฉ ุงูููุงุจุณ ุจุฐูุงุก",
      "ููุงุจุณ ุชูููุฏูุฉ ูุนุตุฑูุฉ",
    ],
    isLocal: true,
    size: "6.9GB",
    processingTime: "12-20 ุซุงููุฉ",
  },
  {
    id: "tattoo_artist",
    name: "ุงุณุชูุฏูู ุงููุดู ุงูุฑููู",
    nameEn: "Tattoo Artist",
    icon: "fas fa-dragon",
    category: "body",
    rating: "โญ",
    description: "ุฅุถุงูุฉ ุฃู ุฅุฒุงูุฉ ุงููุดูู ูุงูุฑุณูู ุนูู ุงูุฌุณู - ููุงู ูุดู ูุญุชุฑู!",
    model: "Stable Diffusion XL",
    features: [
      "ูุดูู ูุฎุตุตุฉ ุจุฃู ุชุตููู",
      "ุฅุฒุงูุฉ ุงููุดูู ุงูููุฌูุฏุฉ",
      "ูุดูู ุนุฑุจูุฉ ูุขุณูููุฉ",
      "ุชุนุฏูู ุฃููุงู ุงููุดูู",
    ],
    isLocal: true,
    size: "6.9GB",
    processingTime: "8-15 ุซุงููุฉ",
  },
  {
    id: "muscle_enhancer",
    name: "ูููู ุงูุนุถูุงุช",
    nameEn: "Muscle Enhancer",
    icon: "fas fa-fist-raised",
    category: "body",
    rating: "โญ",
    description: "ุชูููุฉ ูุชุญุฏูุฏ ุนุถูุงุช ุงูุฌุณู ุจุดูู ุทุจูุนู - ุตุงูุฉ ุฌูู ุฑูููุฉ!",
    model: "Stable Diffusion XL",
    features: [
      "ุชูููุฉ ุงูุนุถูุงุช ุทุจูุนูุงู",
      "ุชุญุฏูุฏ ุนุถูุงุช ุงูุจุทู",
      "ุชูุจูุฑ ุงูุนุถูุงุช ุจูุงูุนูุฉ",
      "ุดูู ุฑูุงุถู ุงุญุชุฑุงูู",
    ],
    isLocal: true,
    size: "6.9GB",
    processingTime: "8-18 ุซุงููุฉ",
  },

  // ๐ ุฃุฏูุงุช ุงูุฎูููุฉ ูุงูุจูุฆุฉ
  {
    id: "bg_remover",
    name: "ููุญุงุฉ ุงูุฎูููุฉ ุงูุณุญุฑูุฉ",
    nameEn: "Magic Background Remover",
    icon: "fas fa-eraser",
    category: "background",
    rating: "โญ",
    description: "ุฅุฒุงูุฉ ุงูุฎูููุฉ ุจุฏูุฉ ุนุงููุฉ ูุน ุงูุญูุงุธ ุนูู ุฃุฏู ุงูุชูุงุตูู",
    model: "Segment Anything",
    features: [
      "ูุดู ุงูุญูุงู ุงูุฐูู",
      "ุญูุธ ุชูุงุตูู ุงูุดุนุฑ",
      "ุฎูููุฉ ุดูุงูุฉ ููุฑูุฉ",
      "ุฏูุฉ ุงุญุชุฑุงููุฉ",
    ],
    isLocal: true,
    size: "2.6GB",
    processingTime: "1-3 ุซูุงูู",
  },
  {
    id: "bg_replacer",
    name: "ุจูุงุจุฉ ุงูุฃุจุนุงุฏ",
    nameEn: "Dimension Portal",
    icon: "fas fa-globe",
    category: "background",
    rating: "โญ",
    description: "ุงุณุชุจุฏุงู ุงูุฎูููุฉ ุจุฃู ููุธุฑ ุฃู ุจูุฆุฉ - ุณุงูุฑ ูุฃู ููุงู ูู ุงูุนุงูู!",
    model: "Stable Diffusion XL",
    features: [
      "ุฎูููุงุช ุทุจูุนูุฉ ุฎูุงุจุฉ",
      "ูุฏู ููุนุงูู ุนุงูููุฉ",
      "ูุถุงุก ููุฌูู",
      "ุฎูููุงุช ุฎูุงููุฉ",
    ],
    isLocal: true,
    size: "6.9GB",
    processingTime: "5-12 ุซุงููุฉ",
  },
  {
    id: "lighting_master",
    name: "ุณูุฏ ุงูุฅุถุงุกุฉ",
    nameEn: "Lighting Master",
    icon: "fas fa-lightbulb",
    category: "background",
    rating: "โญ",
    description: "ุชุนุฏูู ุงูุฅุถุงุกุฉ ูุงูุธูุงู ุจุดูู ุงุญุชุฑุงูู - ูุตูุฑ ูุญุชุฑู!",
    model: "Phi-3 Vision",
    features: [
      "ุฅุถุงุกุฉ ุทุจูุนูุฉ ูุฏุงูุฆุฉ",
      "ุฅุถุงุกุฉ ุงุณุชูุฏูู ุงุญุชุฑุงููุฉ",
      "ุฅุถุงุกุฉ ุฏุฑุงููุฉ ูุณูููุงุฆูุฉ",
      "ุชุญูู ูุงูู ูู ุงูุธูุงู",
    ],
    isLocal: true,
    size: "2.4GB",
    processingTime: "4-8 ุซูุงูู",
  },

  // ๐ญ ุฃุฏูุงุช ุงูุชุญููู ุงูููู
  {
    id: "style_transfer",
    name: "ุขูุฉ ุงููู ุงูุณุญุฑูุฉ",
    nameEn: "Art Magic Machine",
    icon: "fas fa-paint-brush",
    category: "artistic",
    rating: "โญ",
    description: "ุชุญููู ุงูุตูุฑุฉ ูุฃู ุฃุณููุจ ููู ุฃู ุฑุณู - ูู ููุงูุงู ุนุงูููุงู!",
    model: "Stable Diffusion XL",
    features: [
      "ุฃููู ูุงุจุงูู ุงุญุชุฑุงูู",
      "ูุงู ุฌูุฎ ูุจููุงุณู",
      "ูู ุฅุณูุงูู ุชูููุฏู",
      "ุฑุณู ุฑููู ุนุตุฑู",
    ],
    isLocal: true,
    size: "6.9GB",
    processingTime: "8-15 ุซุงููุฉ",
  },
  {
    id: "cartoonizer",
    name: "ูุญูู ุนุงูู ุงููุฑุชูู",
    nameEn: "Cartoon World",
    icon: "fas fa-smile-beam",
    category: "artistic",
    rating: "โญ",
    description: "ุชุญููู ุงูุตูุฑ ุงูุญููููุฉ ุฅูู ุฑุณู ูุฑุชููู - ุงุฏุฎู ุนุงูู ุฏูุฒูู!",
    model: "Stable Diffusion XL",
    features: [
      "ูุฑุชูู ุฏูุฒูู ููุงุณููู",
      "ุฃููู ูุงูุฌุง ูุงุจุงูู",
      "ูุฑุชูู ุฃุทูุงู ูุฑุญ",
      "ุฑุณู ูุงุฑููุงุชูุฑู",
    ],
    isLocal: true,
    size: "6.9GB",
    processingTime: "6-12 ุซุงููุฉ",
  },
  {
    id: "colorizer",
    name: "ุขูุฉ ุงูุฒูู ุงูููููุฉ",
    nameEn: "Time Color Machine",
    icon: "fas fa-rainbow",
    category: "artistic",
    rating: "โญ",
    description: "ุชูููู ุงูุตูุฑ ุงูุฃุจูุถ ูุงูุฃุณูุฏ ุจุฐูุงุก - ุฃุญูู ุฐูุฑูุงุชู ุงููุฏููุฉ!",
    model: "Stable Diffusion XL",
    features: [
      "ุชูููู ุชููุงุฆู ุฐูู",
      "ุฃููุงู ุทุจูุนูุฉ ููุงูุนูุฉ",
      "ุชูููู ุงูุตูุฑ ุงูุชุงุฑูุฎูุฉ",
      "ุฅุนุงุฏุฉ ุฅุญูุงุก ุงูุฐูุฑูุงุช",
    ],
    isLocal: true,
    size: "6.9GB",
    processingTime: "5-10 ุซูุงูู",
  },

  // ๐ง ุฃุฏูุงุช ุงูุชุญุณูู ุงูุชููู
  {
    id: "super_resolution",
    name: "ูุญุณู ุงูุฏูุฉ ุงูุฎุงุฑู",
    nameEn: "Super Resolution",
    icon: "fas fa-search-plus",
    category: "enhancement",
    rating: "โญ",
    description: "ุชุญุณูู ุฌูุฏุฉ ูุฏูุฉ ุงูุตูุฑ ุญุชู 8K - ุชูููุฉ Real-ESRGAN ุงููุชูุฏูุฉ",
    model: "Real-ESRGAN x4+",
    features: [
      "ุฏูุฉ 4K ู 8K",
      "ุชุญุณูู ุงูุตูุฑ ุงููุฏููุฉ",
      "ุงุณุชุนุงุฏุฉ ุงูุชูุงุตูู",
      "ูุถูุญ ุฎุงุฑู",
    ],
    isLocal: true,
    size: "67MB",
    processingTime: "3-8 ุซูุงูู",
  },
  {
    id: "denoiser",
    name: "ููุธู ุงูุตูุฑ ุงูุฐูู",
    nameEn: "Smart Image Cleaner",
    icon: "fas fa-broom",
    category: "enhancement",
    rating: "โญ",
    description: "ุฅุฒุงูุฉ ุงูุถูุถุงุก ูุงูุชุดููุด ูู ุงูุตูุฑ ุจุฏูุฉ ุฎุงุฑูุฉ",
    model: "Real-ESRGAN",
    features: [
      "ุฅุฒุงูุฉ ุงูุชุดููุด ูุงููุฉ",
      "ุชูุธูู ุงูุตูุฑ ุงููุฏููุฉ",
      "ุชุญุณูู ูุถูุญ ุงููุชุงุจุฉ",
      "ุฅุฒุงูุฉ ุงูุนููุจ ุงูุชูููุฉ",
    ],
    isLocal: true,
    size: "67MB",
    processingTime: "2-5 ุซูุงูู",
  },
  {
    id: "sharpener",
    name: "ูููู ุงูุญุฏุฉ ุงูุงุญุชุฑุงูู",
    nameEn: "Pro Sharpener",
    icon: "fas fa-eye",
    category: "enhancement",
    rating: "โญ",
    description: "ุชุญุณูู ุญุฏุฉ ูุชูุงุตูู ุงูุตูุฑ ูุน ุงูุญูุงุธ ุนูู ุงูุทุจูุนูุฉ",
    model: "Real-ESRGAN",
    features: [
      "ุญุฏุฉ ุทุจูุนูุฉ ูุชูุฏูุฉ",
      "ุชุญุณูู ุงูุชูุงุตูู ุงูุฏูููุฉ",
      "ุญูุธ ุงูุฌูุฏุฉ ุงูุฃุตููุฉ",
      "ุชุญุณูู ุตูุฑ ุงูุณูููู",
    ],
    isLocal: true,
    size: "67MB",
    processingTime: "1-3 ุซูุงูู",
  },

  // ๐ฏ ุฃุฏูุงุช ุงูุชุนุฏูู ุงููุชูุฏู
  {
    id: "object_remover",
    name: "ููุญุงุฉ ุงูุนูุงุตุฑ ุงูุณุญุฑูุฉ",
    nameEn: "Magic Object Eraser",
    icon: "fas fa-magic",
    category: "advanced",
    rating: "โญ",
    description: "ุฅุฒุงูุฉ ุฃู ุนูุตุฑ ูู ุงูุตูุฑุฉ ุจุฐูุงุก ุฎุงุฑู - ูุฃูู ูู ููู ููุฌูุฏุงู!",
    model: "Segment Anything",
    features: [
      "ุฅุฒุงูุฉ ููุฑูุฉ ููุนูุงุตุฑ",
      "ููุก ุฐูู ูููุฑุงุบุงุช",
      "ุญูุธ ุงูุฎูููุฉ ุงูุทุจูุนูุฉ",
      "ุฏูุฉ ุงุญุชุฑุงููุฉ",
    ],
    isLocal: true,
    size: "2.6GB",
    processingTime: "3-8 ุซูุงูู",
  },
  {
    id: "object_replacer",
    name: "ูุจุฏู ุงูุนูุงูู",
    nameEn: "World Changer",
    icon: "fas fa-exchange-alt",
    category: "advanced",
    rating: "โญ",
    description: "ุงุณุชุจุฏุงู ุฃู ุนูุตุฑ ุจุนูุตุฑ ุขุฎุฑ ุจุฐูุงุก ุฎุงุฑู",
    model: "Stable Diffusion + SAM",
    features: [
      "ุงุณุชุจุฏุงู ุงูุณูุงุฑุงุช ุจุฃุฎุฑู",
      "ุชุบููุฑ ุงูุญููุงูุงุช ูุงูุทููุฑ",
      "ุงุณุชุจุฏุงู ุงูุฃุซุงุซ",
      "ุชุญููู ุงููุจุงูู",
    ],
    isLocal: true,
    size: "9.5GB",
    processingTime: "8-15 ุซุงููุฉ",
  },
  {
    id: "smart_crop",
    name: "ุงููุงุต ุงูุฐูู",
    nameEn: "Smart Cropper",
    icon: "fas fa-crop",
    category: "advanced",
    rating: "โญ",
    description: "ูุต ุงูุตูุฑ ุจุชุฑููุฒ ุนูู ุงูุนูุงุตุฑ ุงููููุฉ - ูุตูุฑ ูุญุชุฑู!",
    model: "Segment Anything",
    features: [
      "ูุต ุชููุงุฆู ุฐูู",
      "ุชุฑููุฒ ุนูู ุงููุฌูู",
      "ูุต ููุณูุดูุงู ููุฏูุง",
      "ุญูุธ ุงูุนูุงุตุฑ ุงููููุฉ",
    ],
    isLocal: true,
    size: "2.6GB",
    processingTime: "1-3 ุซูุงูู",
  },
  {
    id: "image_merger",
    name: "ุฏุงูุฌ ุงูุฃุจุนุงุฏ",
    nameEn: "Dimension Merger",
    icon: "fas fa-layer-group",
    category: "advanced",
    rating: "โญ",
    description: "ุฏูุฌ ุตูุฑุชูู ุฃู ุฃูุซุฑ ุจุทุฑููุฉ ุฐููุฉ ูุณุญุฑูุฉ",
    model: "Stable Diffusion XL",
    features: [
      "ุฏูุฌ ุฐูู ููุตูุฑ",
      "ุชูููู ููู ุงุญุชุฑุงูู",
      "ุฏูุฌ ุงููุฌูู ูุงูุฃุฌุณุงู",
      "ุฅุจุฏุงุน ุตูุฑ ุฎูุงููุฉ",
    ],
    isLocal: true,
    size: "6.9GB",
    processingTime: "10-20 ุซุงููุฉ",
  },
  {
    id: "pose_editor",
    name: "ูุญุฑุฑ ุงููุถุนูุงุช",
    nameEn: "Pose Master",
    icon: "fas fa-running",
    category: "advanced",
    rating: "๐",
    description: "ุชุนุฏูู ูุถุนูุฉ ุงูุฌุณู ูุงูุฃุทุฑุงู ุจุญุฑูุฉ ูุงููุฉ",
    model: "ControlNet + SD",
    features: [
      "ุชุนุฏูู ูุถุนูุฉ ุงูุฌุณู",
      "ุชุญุฑูู ุงูุฃุทุฑุงู",
      "ูุถุนูุงุช ุฑูุงุถูุฉ",
      "ูุถุนูุงุช ูููุฉ",
    ],
    isLocal: true,
    size: "8.3GB",
    processingTime: "12-25 ุซุงููุฉ",
  },
  {
    id: "hair_stylist",
    name: "ูุตูู ุงูุดุนุฑ ุงูุฑููู",
    nameEn: "Digital Hair Stylist",
    icon: "fas fa-cut",
    category: "advanced",
    rating: "โญ",
    description: "ุชุบููุฑ ุชุณุฑูุญุฉ ูููู ุงูุดุนุฑ - ุตุงููู ุชุฌููู ุฑููู!",
    model: "Stable Diffusion XL",
    features: [
      "ุชุณุฑูุญุงุช ุนุตุฑูุฉ ูููุงุณูููุฉ",
      "ุฃููุงู ุดุนุฑ ุทุจูุนูุฉ ูุฌุฑูุฆุฉ",
      "ุดุนุฑ ูุตูุฑ ูุทููู",
      "ุชุณุฑูุญุงุช ุนุฑุจูุฉ ูุนุงูููุฉ",
    ],
    isLocal: true,
    size: "6.9GB",
    processingTime: "6-12 ุซุงููุฉ",
  },

  // ุฃุฏูุงุช ุฅุถุงููุฉ ูุชูุฏูุฉ
  {
    id: "eye_color_changer",
    name: "ูุบูุฑ ููู ุงูุนููู",
    nameEn: "Eye Color Changer",
    icon: "fas fa-eye",
    category: "face",
    rating: "โญ",
    description: "ุชุบููุฑ ููู ุงูุนููู ุจุฃููุงู ุทุจูุนูุฉ ูุฎูุงููุฉ",
    model: "Phi-3 Vision",
    features: [
      "ุฃููุงู ุนููู ุทุจูุนูุฉ",
      "ุนููู ููููุฉ ุฎูุงููุฉ",
      "ุนููู ูุชุฏุฑุฌุฉ ุงูููู",
      "ุชุฃุซูุฑุงุช ูููู ูุณุญุฑูุฉ",
    ],
    isLocal: true,
    size: "2.4GB",
    processingTime: "2-5 ุซูุงูู",
  },
  {
    id: "teeth_whitener",
    name: "ูุจูุถ ุงูุฃุณูุงู",
    nameEn: "Teeth Whitener",
    icon: "fas fa-tooth",
    category: "face",
    rating: "โญ",
    description: "ุชุจููุถ ุงูุฃุณูุงู ูุชุญุณูู ุงูุงุจุชุณุงูุฉ ุจุดูู ุทุจูุนู",
    model: "Phi-3 Vision",
    features: [
      "ุชุจููุถ ุทุจูุนู ููุฃุณูุงู",
      "ุชุญุณูู ุดูู ุงูุฃุณูุงู",
      "ุงุจุชุณุงูุฉ ููููููุฏ",
      "ุชุนุฏูู ุงููุซุฉ",
    ],
    isLocal: true,
    size: "2.4GB",
    processingTime: "2-4 ุซูุงูู",
  },
  {
    id: "scar_remover",
    name: "ูุฒูู ุงููุฏูุจ ูุงูุนููุจ",
    nameEn: "Scar & Blemish Remover",
    icon: "fas fa-band-aid",
    category: "face",
    rating: "โญ",
    description: "ุฅุฒุงูุฉ ุงููุฏูุจ ูุงูุนููุจ ูุงูุญุจูุจ ูู ุงูุจุดุฑุฉ",
    model: "Phi-3 Vision",
    features: [
      "ุฅุฒุงูุฉ ุงููุฏูุจ ุงููุฏููุฉ",
      "ุนูุงุฌ ุงูุญุจูุจ ูุงูุจูุน",
      "ุชูุนูู ุงูุจุดุฑุฉ",
      "ุจุดุฑุฉ ูุซุงููุฉ ุทุจูุนูุฉ",
    ],
    isLocal: true,
    size: "2.4GB",
    processingTime: "3-6 ุซูุงูู",
  },
  {
    id: "virtual_jewelry",
    name: "ูุฌููุฑุงุช ุงูุชุฑุงุถูุฉ",
    nameEn: "Virtual Jewelry",
    icon: "fas fa-gem",
    category: "advanced",
    rating: "โญ",
    description: "ุฅุถุงูุฉ ูุฌููุฑุงุช ูุฅูุณุณูุงุฑุงุช ุงูุชุฑุงุถูุฉ ุจูุงูุนูุฉ ุนุงููุฉ",
    model: "Stable Diffusion XL",
    features: [
      "ุฃูุฑุงุท ูุฎูุงุชู ุฐูุจูุฉ",
      "ููุงุฏุงุช ูุฃุณุงูุฑ ูุถูุฉ",
      "ูุฌููุฑุงุช ูุงุณูุฉ",
      "ุฅูุณุณูุงุฑุงุช ุนุตุฑูุฉ",
    ],
    isLocal: true,
    size: "6.9GB",
    processingTime: "5-10 ุซูุงูู",
  },
  {
    id: "vintage_filter",
    name: "ููุชุฑ ุงูุญููู",
    nameEn: "Vintage Time Filter",
    icon: "fas fa-history",
    category: "artistic",
    rating: "โญ",
    description: "ุชุญููู ุงูุตูุฑ ูุฃุณุงููุจ ููุชูุบุฑุงููุฉ ูุฏููุฉ ูููุงุณูููุฉ",
    model: "Stable Diffusion XL",
    features: [
      "ุตูุฑ ุจุงูุฃุจูุถ ูุงูุฃุณูุฏ",
      "ุชุฃุซูุฑ ุงูุณูููุง ุงููุฏููุฉ",
      "ููุงุชุฑ ุงูุณุจุนููุงุช ูุงูุซูุงูููุงุช",
      "ุตูุฑ ุนุชููุฉ ุฃูููุฉ",
    ],
    isLocal: true,
    size: "6.9GB",
    processingTime: "4-8 ุซูุงูู",
  },
];

interface LocalAIToolsProps {
  onToolSelect: (tool: LocalAITool) => void;
  selectedTool: string | null;
}

export function LocalAITools({
  onToolSelect,
  selectedTool,
}: LocalAIToolsProps) {
  const { t } = useLanguage();
  const [selectedCategory, setSelectedCategory] = useState<string>("all");
  const [searchQuery, setSearchQuery] = useState("");
  const [isDownloading, setIsDownloading] = useState<Record<string, boolean>>(
    {},
  );
  const [downloadProgress, setDownloadProgress] = useState<
    Record<string, number>
  >({});
  const [installedModels, setInstalledModels] = useState<Set<string>>(
    new Set(),
  );

  const categories = [
    {
      id: "all",
      name: "ุฌููุน ุงูุฃุฏูุงุช",
      nameEn: "All Tools",
      icon: "fas fa-th-large",
      color: "text-white",
    },
    {
      id: "face",
      name: "ุชุนุฏูู ุงููุฌู",
      nameEn: "Face Tools",
      icon: "fas fa-smile",
      color: "text-cyan-400",
    },
    {
      id: "body",
      name: "ุชุนุฏูู ุงูุฌุณู",
      nameEn: "Body Tools",
      icon: "fas fa-user",
      color: "text-purple-400",
    },
    {
      id: "background",
      name: "ุงูุฎูููุฉ ูุงูุจูุฆุฉ",
      nameEn: "Background",
      icon: "fas fa-image",
      color: "text-green-400",
    },
    {
      id: "artistic",
      name: "ุงููู ูุงูุฅุจุฏุงุน",
      nameEn: "Artistic",
      icon: "fas fa-palette",
      color: "text-pink-400",
    },
    {
      id: "enhancement",
      name: "ุงูุชุญุณูู ุงูุชููู",
      nameEn: "Enhancement",
      icon: "fas fa-sparkles",
      color: "text-emerald-400",
    },
    {
      id: "advanced",
      name: "ุฃุฏูุงุช ูุชูุฏูุฉ",
      nameEn: "Advanced",
      icon: "fas fa-cogs",
      color: "text-orange-400",
    },
  ];

  const filteredTools = LOCAL_AI_TOOLS.filter((tool) => {
    const matchesCategory =
      selectedCategory === "all" || tool.category === selectedCategory;
    const matchesSearch =
      searchQuery === "" ||
      tool.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
      tool.nameEn.toLowerCase().includes(searchQuery.toLowerCase()) ||
      tool.description.toLowerCase().includes(searchQuery.toLowerCase());
    return matchesCategory && matchesSearch;
  });

  const handleDownloadModel = async (tool: LocalAITool) => {
    setIsDownloading((prev) => ({ ...prev, [tool.id]: true }));
    setDownloadProgress((prev) => ({ ...prev, [tool.id]: 0 }));

    // ูุญุงูุงุฉ ุชุญููู ุงููููุฐุฌ
    for (let progress = 0; progress <= 100; progress += 2) {
      await new Promise((resolve) => setTimeout(resolve, 50));
      setDownloadProgress((prev) => ({ ...prev, [tool.id]: progress }));
    }

    setIsDownloading((prev) => ({ ...prev, [tool.id]: false }));
    setInstalledModels((prev) => new Set([...prev, tool.model]));
  };

  const isModelInstalled = (tool: LocalAITool) => {
    return installedModels.has(tool.model);
  };

  const getRatingIcon = (rating: string) => {
    return rating === "๐" ? (
      <Badge
        variant="destructive"
        className="text-xs bg-red-500/20 text-red-400"
      >
        <i className="fas fa-exclamation-triangle mr-1"></i>
        +18
      </Badge>
    ) : (
      <Badge
        variant="secondary"
        className="text-xs bg-green-500/20 text-green-400"
      >
        <i className="fas fa-star mr-1"></i>
        ุขูู
      </Badge>
    );
  };

  return (
    <div className="space-y-8">
      {/* ุนููุงู ุฑุฆูุณู */}
      <div className="text-center">
        <h1 className="text-4xl font-bold neon-text text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-600 mb-4">
          ๐ KNOUX VERSA - ุงููุธุงู ุงููุญูู ุงููุงูู
        </h1>
        <p className="text-xl text-gray-300 mb-2">
          {t("30 ุฃุฏุงุฉ ุฐูุงุก ุงุตุทูุงุนู ูุชูุฏูุฉ - ุชุนูู ุจุงููุงูู ุนูู ุฌูุงุฒู")}
        </p>
        <div className="flex justify-center items-center space-x-4 mb-6">
          <Badge className="bg-cyan-400/20 text-cyan-400 px-4 py-2">
            <i className="fas fa-shield-alt mr-2"></i>
            {t("100% ูุญูู ูุขูู")}
          </Badge>
          <Badge className="bg-purple-400/20 text-purple-400 px-4 py-2">
            <i className="fas fa-infinity mr-2"></i>
            {t("ุญุฑูุฉ ุจูุง ุญุฏูุฏ")}
          </Badge>
          <Badge className="bg-green-400/20 text-green-400 px-4 py-2">
            <i className="fas fa-bolt mr-2"></i>
            {t("ูุนุงูุฌุฉ ููุฑูุฉ")}
          </Badge>
        </div>
      </div>

      {/* ุดุฑูุท ุงูุจุญุซ */}
      <div className="max-w-md mx-auto">
        <div className="relative">
          <input
            type="text"
            placeholder={t("ุงุจุญุซ ุนู ุฃู ุฃุฏุงุฉ...")}
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
            className="w-full bg-gray-800/50 border border-cyan-400/30 rounded-full px-4 py-3 pl-12 text-white placeholder-gray-400 focus:border-cyan-400 focus:outline-none transition-all duration-300"
          />
          <i className="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-cyan-400"></i>
        </div>
      </div>

      {/* ููุชุฑ ุงููุฆุงุช */}
      <div className="flex flex-wrap gap-3 justify-center">
        {categories.map((category) => (
          <button
            key={category.id}
            onClick={() => setSelectedCategory(category.id)}
            className={`
              glass rounded-full px-6 py-3 text-sm font-semibold transition-all duration-300 hover:scale-105
              ${
                selectedCategory === category.id
                  ? `border-2 ${category.color} bg-opacity-20 neon-glow transform scale-105`
                  : "border border-gray-600 hover:border-gray-400"
              }
            `}
          >
            <i className={`${category.icon} mr-2 ${category.color}`}></i>
            {t(category.name)}
          </button>
        ))}
      </div>

      {/* ุนุฏุงุฏ ุงูุฃุฏูุงุช */}
      <div className="text-center">
        <p className="text-gray-400">
          <span className="text-cyan-400 font-bold text-2xl">
            {filteredTools.length}
          </span>{" "}
          {t("ุฃุฏุงุฉ ุฐูุงุก ุงุตุทูุงุนู ูุชุงุญุฉ")}
          {selectedCategory !== "all" && (
            <span className="ml-2">
              โข{" "}
              <span className="text-purple-400">
                {t(
                  categories.find((c) => c.id === selectedCategory)?.name || "",
                )}
              </span>
            </span>
          )}
        </p>
      </div>

      {/* ุดุจูุฉ ุงูุฃุฏูุงุช */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
        {filteredTools.map((tool, index) => (
          <Card
            key={tool.id}
            className={`
              glass-strong rounded-2xl p-6 cursor-pointer transition-all duration-500 hover:shadow-2xl group animate-float relative overflow-hidden
              ${selectedTool === tool.id ? "border-cyan-400 bg-cyan-400/10 neon-glow scale-105" : "hover:border-cyan-400/50 hover:scale-105"}
              ${tool.rating === "๐" ? "border-red-500/30" : "border-green-500/30"}
            `}
            style={{ animationDelay: `${index * 0.05}s` }}
            onClick={() => onToolSelect(tool)}
          >
            {/* ุงูุชูููู */}
            <div className="absolute top-3 right-3">
              {getRatingIcon(tool.rating)}
            </div>

            {/* ุฃููููุฉ ุงูุฃุฏุงุฉ */}
            <div className="w-16 h-16 rounded-xl mb-4 bg-gradient-to-br from-cyan-400/20 to-purple-500/20 flex items-center justify-center relative group-hover:scale-110 transition-transform duration-300">
              <i
                className={`${tool.icon} text-2xl text-cyan-400 group-hover:text-white transition-colors duration-300`}
              ></i>
              {isModelInstalled(tool) && (
                <div className="absolute -top-1 -right-1 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center">
                  <i className="fas fa-check text-white text-xs"></i>
                </div>
              )}
            </div>

            {/* ุงุณู ุงูุฃุฏุงุฉ */}
            <h3 className="text-lg font-bold text-cyan-400 neon-text mb-2 group-hover:text-white transition-colors duration-300">
              {t(tool.name)}
            </h3>
            <p className="text-sm text-gray-400 mb-1">{tool.nameEn}</p>

            {/* ุงููุตู */}
            <p className="text-gray-300 text-sm mb-4 line-clamp-2 group-hover:text-gray-200 transition-colors duration-300">
              {tool.description}
            </p>

            {/* ูุนูููุงุช ุงููููุฐุฌ */}
            <div className="space-y-2 mb-4">
              <div className="flex justify-between items-center text-xs">
                <span className="text-gray-400">{t("ุงููููุฐุฌ")}:</span>
                <span className="text-purple-400 font-semibold">
                  {tool.model}
                </span>
              </div>
              <div className="flex justify-between items-center text-xs">
                <span className="text-gray-400">{t("ุงูุญุฌู")}:</span>
                <span className="text-cyan-400">{tool.size}</span>
              </div>
              <div className="flex justify-between items-center text-xs">
                <span className="text-gray-400">{t("ุฒูู ุงููุนุงูุฌุฉ")}:</span>
                <span className="text-green-400">{tool.processingTime}</span>
              </div>
            </div>

            {/* ุงููููุฒุงุช */}
            <div className="space-y-1 mb-4">
              {tool.features.slice(0, 2).map((feature, idx) => (
                <div
                  key={idx}
                  className="flex items-center text-xs text-gray-300"
                >
                  <i className="fas fa-check text-green-400 mr-2"></i>
                  {feature}
                </div>
              ))}
            </div>

            {/* ุฃุฒุฑุงุฑ ุงูุชุญูู */}
            <div className="space-y-2">
              {!isModelInstalled(tool) && (
                <>
                  {isDownloading[tool.id] ? (
                    <div className="space-y-2">
                      <Progress
                        value={downloadProgress[tool.id]}
                        className="h-2"
                      />
                      <p className="text-xs text-cyan-400 text-center">
                        {t("ุฌุงุฑู ุงูุชุญููู")} {downloadProgress[tool.id]}%
                      </p>
                    </div>
                  ) : (
                    <Button
                      onClick={(e) => {
                        e.stopPropagation();
                        handleDownloadModel(tool);
                      }}
                      className="w-full bg-cyan-400/20 border-cyan-400 hover:bg-cyan-400/30 text-cyan-400 hover:text-white"
                      size="sm"
                    >
                      <i className="fas fa-download mr-2"></i>
                      {t("ุชุญููู ุงููููุฐุฌ")}
                    </Button>
                  )}
                </>
              )}

              {isModelInstalled(tool) && (
                <Button
                  className="w-full bg-green-400/20 border-green-400 hover:bg-green-400/30 text-green-400 hover:text-white"
                  size="sm"
                >
                  <i className="fas fa-play mr-2"></i>
                  {t("ุงุณุชุฎุฏุงู ุงูุฃุฏุงุฉ")}
                </Button>
              )}
            </div>

            {/* ูุคุดุฑ ุงูุชุญุฏูุฏ */}
            {selectedTool === tool.id && (
              <div className="absolute top-2 left-2">
                <div className="w-4 h-4 bg-cyan-400 rounded-full animate-pulse-glow"></div>
              </div>
            )}

            {/* ุชุฃุซูุฑ ุงููููุฑ */}
            <div className="absolute inset-0 bg-gradient-to-r from-cyan-400/0 to-purple-400/0 group-hover:from-cyan-400/5 group-hover:to-purple-400/5 transition-all duration-300 rounded-2xl pointer-events-none"></div>
          </Card>
        ))}
      </div>

      {/* ุฑุณุงูุฉ ุนุฏู ูุฌูุฏ ูุชุงุฆุฌ */}
      {filteredTools.length === 0 && (
        <div className="text-center py-12">
          <i className="fas fa-search text-6xl text-gray-600 mb-4"></i>
          <h3 className="text-xl font-bold text-gray-400 mb-2">
            {t("ูู ูุชู ุงูุนุซูุฑ ุนูู ุฃุฏูุงุช")}
          </h3>
          <p className="text-gray-500">
            {t("ุฌุฑุจ ุงูุจุญุซ ุจูููุงุช ูุฎุชููุฉ ุฃู ุงุฎุชุฑ ูุฆุฉ ุฃุฎุฑู")}
          </p>
        </div>
      )}

      {/* ูุนูููุงุช ุฅุถุงููุฉ */}
      <div className="text-center pt-8 border-t border-gray-700">
        <p className="text-gray-400 mb-4">
          ๐ฅ <strong className="text-cyan-400">ูููุฉ ุงูุณุฑ ูููุฌุงุญ:</strong> "ุญุฑูุฉ
          ุจูุง ุญุฏูุฏ ูุน KnouxAI"
        </p>
        <div className="flex flex-wrap justify-center gap-4 text-sm">
          <span className="flex items-center text-green-400">
            <i className="fas fa-shield-alt mr-2"></i>
            ุฎุตูุตูุฉ ูุทููุฉ
          </span>
          <span className="flex items-center text-cyan-400">
            <i className="fas fa-bolt mr-2"></i>
            ูุนุงูุฌุฉ ููุฑูุฉ
          </span>
          <span className="flex items-center text-purple-400">
            <i className="fas fa-code mr-2"></i>
            ููุชูุญ ุงููุตุฏุฑ
          </span>
          <span className="flex items-center text-orange-400">
            <i className="fas fa-infinity mr-2"></i>
            ุจูุง ุญุฏูุฏ
          </span>
        </div>
      </div>
    </div>
  );
}
